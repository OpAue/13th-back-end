# EC2
정의 : 클라우드의 가상 서버  
### AMI
정의 : 운영체제 + 어플리케이션 + 설정이 포함된 이미지  
정의엔 '이미지'라고 되어 있으나,   
서버 컴퓨터의 하드디스크 정보를 묶은 것에 가깝다.  
-> EC2 인스턴스 전체를 복제할 수 있는 설계도  
-> 서버 복제할 때 쓰인다.  

### 키 페어
AWS EC2는 비밀번호 인증이 아닌, 키 페어 인증을 지원  
SSH : 리눅스 서버에 접속, 원격 제어를 위한 프로토콜  
-> EC2 서버의 쉘을 띄우는 역할  
private key : 열쇠 역할, 내 컴퓨터가 가짐, .pem 형식으로 저장  
public key : 자물쇠 역할, EC2 서버가 가짐, RSA 알고리즘 사용  


### VPC / 서브넷 / 퍼블릭,프라이빗 IP 개념
인스턴스 생성 시 AWS에서 VPC(독립된 네트워크 공간) 생성  
VPC 내부에 두 종류의 서브넷이 존재  
서브넷 종류 : 퍼블릭 액세스 / 프라이빗 액세스  
서버가 외부 접근 허용했는지 여부에 따라 다른 서브넷에서 관리  
관리 방법 : 인터넷 게이트웨이 연결 여부  
(예)  
EC2 서버 -> 외부 접근 허용 -> 퍼블릭 액세스 서브넷  
DB 서버 -> 외부 접근 불허 -> 프라이빗 액세스 서브넷  
퍼블릭 IP : 전 세계 인터넷 상의 주소  
프라이빗 IP : VPC(내부 네트워크)에서만 사용되는 주소  
프라이빗 DB 서버는 같은 VPC 내에 있는 EC2 서버에서 접근 가능  
  
### 보안 그룹  
인바운드/아웃바운드를 통해 어떤 IP가, 어떤 포트를 통해 EC2에 접근할 수 있는지 제어하는 방화벽  
<흔한 설정(인바운드)>  
22포트 : ssh 프로토콜  
80포트 : http  
443포트 : https  
  
## 인스턴스 유형  
서버의 CPU 성능, RAM 용량을 설정  
  
## 스토리지 구성  
서버의 하드디스크 관련 설정  
  
  
  
    
# RDS  
## 기본 설정  
DB 엔진 : MySQL  
인스턴스 식별자 : DB의 고유한 ID  
자격 증명 : DB 접근 시 ID/PW 설정  
인스턴스 구성 : CPU, RAM 설정  
스토리지 : 하드디스크 관련 설정  
-> 스토리지 자동 조정 : 용량 초과 시 공간 자동 추가 할당  
  
## 퍼블릭 액세스  
퍼블릭 액세스 허용(퍼블릭 IP 주소 할당) : 퍼블릭 IP 주소로 누구나 접근 가능  
허용 안함 : VPC를 통해 EC2에서 접근  
  
## 보안 그룹  
3306포트 : MySQL 기본포트(퍼블릭 액세스)  
  
  
  
  
# EC2에 프로젝트 배포  
### Github에서 프로젝트 가져오기  
방법 : git clone  
private repository에서 clone하기 위해서? -> ssh 인증 필요  
~./ssh -> 개인키와 공개키 생성  
GitHub 계정에 공개 키(id_rsa.pub)등록  
ssh 주소로 git clone -> ./ssh/id_rsa의 개인키를 통해 인증 -> 프로젝트 가져오기 성공  
  
### 가상메모리 설정  
EC2 인스턴스 생성할 때 -> RAM용량 1GB로 설정  
빌드할 때 1GB 이상의 공간이 필요 -> 가상 메모리 설정 필요(swap 공간 할당)  
비어 있는 디스크에 swap영역 할당(/dev/zero -> /swapfile)  
총 메모리 용량 : RAM(1GB) + Swap(2GB 추가 설정) -> 3GB  
  
##### 가상 메모리 개념  
운영체제는 RAM을 통해 프로세스들을 관리 (한 프로세스를 낮은 단위로 쪼개서 관리)  
-> 메모리 공간이 부족하다? -> 디스크의 swap영역으로 사용률이 낮은 '프로세스의 단위'가 이동  
  
### 프로젝트 빌드 후 실행  
##### 빌드  
빌드한다? -> 소스코드를 실행 가능한 파일(.jar)로 바꾸는 과정  
##### 실행  
.jar 파일을 실행(java -jar <jar 파일>)  
nohup -> 터미널 연결을 끊어도 실행된다. -> 로그 출력이 터미널이 아닌 nohup.out 파일에 저장됨  
tail 명령어를 통해 nohup.out 파일 실시간 확인  
& -> 프로세스 실행 중에도 터미널 입력 가능  



